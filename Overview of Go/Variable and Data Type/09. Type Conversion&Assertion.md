# Type Conversion & Assertion

Digunakan banyak dalam konversi data seperti parsing API response tanpa struktur.

## Type Conversion

Merupakan fitur bawaan Go, konversi data type ke type lain

`value:= var(string/int/etc)`

Proses akan dievaluasi saat `compile`, sehingga 100% tidak akan gagal saat runtime, karena Go sudah mengetahui bahwa tipe asal bisa dikonversi saat `compile`.

```go
var i interface{} = "hello"

n := i(int) // ❌ Error compile time
fmt.Println(n)

```

| Asal                                | Tujuan              | Bisa dikonversi langsung?       | Catatan                       |
| ----------------------------------- | ------------------- | ------------------------------- | ----------------------------- |
| `int`, `float`, `uint`, `byte`, dll | antar tipe numerik  | ✅                               | Bisa, tapi hati-hati overflow |
| `string`                            | `[]byte` / `[]rune` | ✅                               | Konversi per karakter         |
| `[]byte` / `[]rune`                 | `string`            | ✅                               | Kembali jadi teks             |
| `interface{}`                       | tipe konkret        | ❌ (assertion, bukan conversion) | Butuh `.(T)`                  |
| `array`                             | `slice`             | ✅ dengan slicing (`arr[:]`)     | Bukan conversion literal      |
| `struct` berbeda tipe               | ❌                   | Tidak bisa tanpa `unsafe`       |                               |

## Type Assertion

Digunakan untuk mengecek seubah tipe data. Terima `ok`, agar program tidak `panic` saat runtime.

```go
s, ok := i.(string)
if ok {
    fmt.Println("Berhasil:", s)
} else {
    fmt.Println("Gagal konversi")
}
```

## Contoh Umum Keduanya

Dalam sebuah program konversi tipe di Go, tipe asal harus diketahui yaitu dengan `assertion`.

```json
{
  "id": 42,
  "name": "Farid",
  "active": true
}
```

```go
package main

import (
 "encoding/json"
 "fmt"
)

func main() {
    jsonData := []byte(`{"id":42,"name":"Farid","active":true}`)
    
    var data map[string]interface{}
    json.Unmarshal(jsonData, &data)

    fmt.Println(data)

    // konversi masing2 ke tipe
    id, ok := data["id"].(float64)
    if !ok {
        fmt.Println("id bukan angka")
        return
    }
    idInt := int(id) // ✅ type conversion dari float64 ke int
    fmt.Println("ID (int):", idInt)
}
```
